-- Insert test transaction with valid transaction_type ('purchase')
INSERT INTO transactions (
  content_id,
  buyer_id,
  creator_id,
  sponsor_id,
  sponsorship_id,
  transaction_type,
  amount,
  platform_fee,
  creator_revenue,
  gross_amount,
  expert_price_huf,
  expert_payout,
  platform_commission,
  member_payment_amount,
  sponsor_payment_amount,
  share_percentage,
  status,
  created_at
) VALUES (
  (SELECT id FROM expert_contents WHERE title = 'Kov치szos vide칩kurzus' LIMIT 1),
  'd150eb0a-5923-45b2-aa04-9f9c39e211d4',
  'd150eb0a-5923-45b2-aa04-9f9c39e211d4',
  'd150eb0a-5923-45b2-aa04-9f9c39e211d4',
  (SELECT id FROM content_sponsorships WHERE content_id = (SELECT id FROM expert_contents WHERE title = 'Kov치szos vide칩kurzus' LIMIT 1) LIMIT 1),
  'purchase',
  10000,
  2000,
  8000,
  10000,
  10000,
  8000,
  2000,
  6000,
  4000,
  80.00,
  'completed',
  NOW()
);