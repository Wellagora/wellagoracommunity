# WellAgora — Fejlesztési Napló 2026-02-17

> Fejlesztő: Cascade AI + Kelemen Attila | Időtartam: ~2 óra | 4 commit

---

## Összefoglaló

SEO implementáció (P0 + P1 feladatok) + technikai cleanup + prerendering bevezetése. A cél: a WellAgora oldal keresőmotorok számára optimalizált legyen a launch előtt.

---

## Commit `c024b7b` — SEO P1 feladatok

### JSON-LD strukturált adatok
- Új komponens: `src/components/StructuredData.tsx`
- **Organization + WebSite** schema → Főoldal (`Index.tsx`)
- **FAQPage** schema → Segítség (`HelpPage.tsx`) + Szponzor (`SponsorLandingPage.tsx`)
- Típusok: Organization, WebSite, FAQPage, BreadcrumbList (utóbbi előkészítve)

### Statikus sitemap.xml
- `public/sitemap.xml` — 12 publikus route
- Prioritások: főoldal (1.0), programs/events (0.9), community/sponsor (0.8), stb.

### Hero szöveg kulcsszó-optimalizálás (3 nyelv)
- **HU**: "Helyi Szakértők. Közösségi Programok." + "Fedezd fel a régiód szakértőinek workshopjait..."
- **EN**: "Local Experts. Community Programs."
- **DE**: "Lokale Experten. Gemeinschaftsprogramme."
- Trust badge-ek prelaunch-hoz igazítva: "Ingyenes regisztráció", "Szponzorált programok", "Helyi szakértők"

### Bevezető szöveg Piactér + Események oldalakra
- Lokalizált (HU/EN/DE) SEO-szöveg a keresőmezők felett
- `seo.marketplace.intro` és `seo.events.intro` kulcsok

### Terminológia javítás
- `wellness` → `jóllét` (HU) / `wellbeing` (EN) / `Wohlbefinden` (DE) — mindenhol
- `SEO_STRATEGY.md` frissítve v1.1-re: prelaunch kontextus + wellness→wellbeing

---

## Commit `d6efede` — Cleanup & bugfixek

### hu.json duplikált kulcsok tisztítása
- **487 duplikált kulcs** eltávolítva, **750 sor** törölve
- EN és DE locale fájlok szintén deduplikálva
- A runtime viselkedés nem változott (JSON.parse mindig az utolsó duplikátumot tartja)

### OG image javítás
- `SEOHead.tsx` és `StructuredData.tsx` — a `/og-image.png` (ami nem létezett!) lecserélve a valódi Google Storage URL-re
- Ezzel a social sharing preview (Facebook, Twitter, WhatsApp) is működik

### Favicon javítás
- `index.html` — Google Storage URL helyett lokális `favicon.png` / `favicon.ico`

### 404 oldal SEO
- `NotFound.tsx` — `<Helmet>` hozzáadva: `<meta name="robots" content="noindex, nofollow" />`
- A 404 oldalak nem indexelődnek a Google-ben

### manifest.json javítás
- Események shortcut URL: `/esemenyek` → `/events` (a valódi route)

### EventsPageNew.tsx TypeScript hiba javítás
- Line 102: Supabase nested `.eq()` típushiba → `as any` cast

### Cookie consent
- Már létezett teljes implementáció (`CookieConsentBanner.tsx` + `lib/cookieConsent.ts`)
- A duplikátumként létrejött `CookieConsent.tsx` törölve

### Netlify SPA support
- `public/_redirects` létrehozva: `/* → /index.html 200`

---

## Commit `2845f62` — Prerendering bevezetése

### Mi ez?
A WellAgora SPA (Single Page App) → a Google crawler üres `<div id="root">` kap.
A prerendering a build után **headless Chrome-mal** meglátogatja az összes publikus oldalt és **elmenti a renderelt HTML-t** statikus fájlként.

### Fájlok
- `scripts/prerender.mjs` — Puppeteer-alapú prerender script
- `src/main.tsx` — `hydrateRoot` support (ha van prerendered tartalom → hydrate, ha nincs → render)
- `package.json` — új script: `build:prerender`

### Eredmény
```
✅ /                    → 64.6KB (h1✓) (meta✓)
✅ /programs            → 83.1KB (h1✓) (meta✓)
✅ /events              → 77.5KB (h1✓) (meta✓)
✅ /community           → 78.8KB (h1✓) (meta✓)
✅ /sponsor             → 99.7KB (h1✓) (meta✓)
✅ /ai-assistant        → 70.8KB (h1✓) (meta✓)
✅ /partners            → 96.3KB (h1✓) (meta✓)
✅ /contact             → 87.6KB (h1✓) (meta✓)
✅ /help                → 92.0KB (h1✓) (meta✓)
✅ /impressum           → 86.8KB (h1✓) (meta✓)
✅ /terms               → 93.6KB (h1✓) (meta✓)
✅ /privacy-policy      → 100.6KB (h1✓) (meta✓)
```

---

## Commit `2ca0c96` — CI + Netlify deploy konfiguráció

### netlify.toml (új fájl)
- Build command: `npm run build && node scripts/prerender.mjs`
- SPA redirect: `/* → /index.html` (200)
- Cache headers: `/assets/*`, `/icons/*` — 1 éves immutable
- Security headers: `X-Frame-Options: DENY`, `X-Content-Type-Options: nosniff`, `Referrer-Policy`, `Permissions-Policy`

### CI pipeline frissítés
- `.github/workflows/ci.yml` — prerender lépés hozzáadva (non-blocking: ha fail, a sima SPA build marad)

### Prerender script robusztussá téve
- Ha nincs puppeteer → graceful exit
- Ha nem indul a Chrome → graceful exit
- CI-kompatibilis Chrome flagek: `--no-sandbox`, `--disable-dev-shm-usage`, `--single-process`

---

## Módosított fájlok összesítés

| Fájl | Változás |
|---|---|
| `src/components/StructuredData.tsx` | ÚJ — JSON-LD schema komponens |
| `src/components/SEOHead.tsx` | OG image javítás |
| `src/main.tsx` | Hydration support |
| `src/pages/Index.tsx` | StructuredData integráció |
| `src/pages/HelpPage.tsx` | FAQPage StructuredData |
| `src/pages/SponsorLandingPage.tsx` | FAQPage StructuredData |
| `src/pages/EventsPageNew.tsx` | Intro text + TS hiba javítás |
| `src/pages/ProgramsListingPage.tsx` | Intro text |
| `src/pages/NotFound.tsx` | SEOHead (noindex) |
| `src/locales/hu.json` | Deduplikálás + SEO kulcsok + hero text |
| `src/locales/en.json` | SEO kulcsok + hero text |
| `src/locales/de.json` | SEO kulcsok + hero text |
| `public/sitemap.xml` | ÚJ — 12 route |
| `public/_redirects` | ÚJ — Netlify SPA |
| `public/manifest.json` | URL javítás |
| `index.html` | Favicon javítás |
| `netlify.toml` | ÚJ — Deploy + security config |
| `.github/workflows/ci.yml` | Prerender lépés |
| `scripts/prerender.mjs` | ÚJ — Puppeteer prerender |
| `package.json` | build:prerender script + puppeteer dep |
| `SEO_STRATEGY.md` | wellness→wellbeing, prelaunch context |

---

## Manuális teendők (nem kód)

1. **Google Search Console** — wellagora.org hozzáadása, sitemap.xml beküldése
2. **Netlify dashboard** — ellenőrizni, hogy a `netlify.toml` felülírta-e a build command-ot
3. **OG image** — érdemes lenne egy valódi 1200×630px social sharing képet készíteni és `/public/og-image.png`-ként elhelyezni

---

## Fontos szabály

> **SOHA ne használjunk "wellness" szót a WellAgora-ban!**
> - HU: **jóllét**
> - EN: **wellbeing**
> - DE: **Wohlbefinden**
> A kód belső kulcsokban (`wellness` kategória ID) maradhat, de minden user-facing szövegben tilos.
